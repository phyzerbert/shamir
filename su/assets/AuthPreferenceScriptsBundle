if(function(){"use strict";function u(n,t,i,r,u,f){r.name="theNameHasBeenPassed";r.dlgInstance=null;var v,o,s,c,y,e,l,p,h,w={},a=1001;r.showServiceModal=function(n){console.log("IDShield modalopenned");o=n.success;s=n.failed;c=n.notifySiteCat;y=n.IDShieldBaseURL;h=n.flagValue;v=n.username;l=n.TransmitAppID;p=n.TransmitPolicy;w={username:n.username,TransactionID:n.TransactionID,IDShieldBaseURL:n.IDShieldBaseURL,ContextData:"",TransmitAppID:""};r.navigatePage=function(n,t){i.go(n,{transmitParams:t})};r.$on("rootScope:popupInstance",function(n,t){console.log(t);e=t});r.opts={backdrop:!0,keyboard:!0,templateUrl:"IdShieldContainer.html",controller:"AuthPreferenceIndexController",resolve:{}};r.opts.resolve.item=function(){return angular.copy({name:r.name,transmitParams:n})};f.setParamsFromNative(n);e=u.open(r.opts);angular.element(document.getElementsByTagName("body")).toggleClass("sharedauth-modal-open");l=="mbl"&&setTimeout(function(){var n=document.getElementsByClassName("modal fade ng-isolate-scope in")[0];n!=undefined&&n!=""&&(n.setAttribute("role","presentation"),n.setAttribute("tabindex","-1"),n.setAttribute("aria-labelledby","authOptions"),n.setAttribute("aria-live","assertive"),n.setAttribute("id","idShieldContainer"),n.removeAttribute("ng-click"),$(".sharedauth-modal-open").css("position","absolute"),$(".sharedauth-modal-open").css("height","130%"),$(".sharedauth-modal-open").css("max-height","none"),$(".modal").css("position","absolute"))},1e3);e.result.then(function(){},function(t){angular.element(document.getElementsByTagName("body")).toggleClass("sharedauth-modal-open");n.modalClose&&t==="cancel"&&n.modalClose()});r.$on("NotifySiteCat",function(n,t){n&&n.preventDefault();c(t)});r.$on("IDShieldConfig",function(n,t){n&&n.preventDefault();t==200?h==="true"?o({result:"success",code:a}):o({result:"success",code:200}):s({error:"error",code:t});e.dismiss()});r.$on("BackToMyDashBoard",function(n){n&&n.preventDefault();h==="true"?o({result:"success",code:a}):s({error:"cancelled",code:"105"});e.dismiss()});r.dlgInstance=e}}var n,t,r=document.getElementById("divRootProject"),i;r!=undefined&&r!=null?(n="../../Templates/MyProfile/",t=["ui.bootstrap","ui.router","CommonModule"]):(n="app/Omni/Templates/IDShieldQA/",t=["ui.bootstrap","ui.router","ngAria","CommonModule","idShieldModule","AuthPreferenceTemplateModule"]);i=angular.module("AuthPreferencesModule",t);i.run(["$rootScope",function(t){t.templatePath=n}]).config(["$stateProvider",function(t){t.state("AuthenticationPreferences",{url:"/AuthenticationPreferences",templateUrl:n+"AuthenticationPreferences.html",controller:"AuthenticationPreferencesController",controllerAs:"vm"}).state("OTPMobilePreference",{url:"/OTPMobilePreference",templateUrl:n+"OTPMobilePreference.html",controller:"OTPMobilePreferenceController",controllerAs:"vm"}).state("GetUserQuestions",{url:"/GetUserQuestions",templateUrl:n+"UserQuestions.html",controller:"GetUserQuestionsController",controllerAs:"vm"}).state("GetUserQuestionsReview",{url:"/GetUserQuestionsReview",templateUrl:n+"UserQuestionsReview.html",controller:"GetUserQuestionsReviewController",controllerAs:"vm"}).state("GetUserQuestionsConfirmation",{url:"/GetUserQuestionsConfirmation",templateUrl:n+"UserQuestionsConfirmation.html",controller:"GetUserQuestionsConfirmationController",controllerAs:"vm"})}]);i.controller("SharedAuthModalController",u);u.$inject=["$rootScope","$injector","$state","$scope","$modal","AuthPreferenceService"]}(),function(){"use strict";function n(n,t,i,r,u,f,e,o,s){function l(){c.InitializeMobileSpecificInfo=a;n.isTouch=c.isTouch;s.setcmsDirectiveUrl(o.getOLSServiceRootUrl());h()}function h(){var t=o.getparamsFromNative(),n="";angular.isUndefined(t)||(n=o.getparamsFromNative().TransmitAppID);n==="mbl"?u.go("GetUserQuestions"):document.getElementById("divQAMobileFlow").value=="Yes"?u.go("GetUserQuestions"):u.go("AuthenticationPreferences")}function a(){var i=document.getElementById("BaseUrlOmni").getAttribute("appbaseurl"),t,r,u,f;if(document.getElementById("hiddUXName").value.toLowerCase()!=="touch"&&OmniDataUtil.getOmniData("lpID")!==null&&(r=OmniDataUtil.getOmniData("lpID"),document.cookie="riblpid="+r,o.setLpid(r),OmniDataUtil.delOmniData("lpID")),n.aftokenValue===undefined)if(OmniDataUtil.getOmniData("MBLAfToken")!==undefined)n.aftokenValue="af("+OmniDataUtil.getOmniData("MBLAfToken")+")",t=i+"/OLS/"+n.aftokenValue+"/",o.setOLSServiceRootUrl(t),s.setCommonOlmmRootUrl(t),s.setcmsDirectiveUrl(t),h();else{if(u=o.getOLSServiceRootUrl(),u)return;f=i+"/OLS/Launch/GetAfToken";s.result("GET",f).success(function(r){n.aftokenValue=r;t=i+"/OLS/"+n.aftokenValue+"/";o.setOLSServiceRootUrl(t);s.setcmsDirectiveUrl(t);s.setCommonOlmmRootUrl(t);h()}).error(function(){})}else h()}var c=this;i("AuthPreferenceBaseController",{vm:c});l();n.cancel=function(){f.$broadcast("BackToMyDashBoard")}}angular.module("AuthPreferencesModule").controller("AuthPreferenceIndexController",n);n.$inject=["$scope","$compile","$controller","$injector","$state","$rootScope","AuthPreferenceConstants","AuthPreferenceService","CommonService","CommonHelper"]}(),function(){"use strict";function n(n,t,i){var r;n.successMessage=!0;n.failureMessage=!1;n.isTouch=t.isTouch();n.isTablet=t.isTablet();n.isMobileWeb=!1;n.isTouch&&(n.isWrapper=i.TEXT_USBWRAPPEROMNI,n.isScroller=i.TEXT_USBSCROLLEROMNI);n.isTouch||(n.isBanker=t.isBanker());n.scrollOmni=function(){r&&r.reinitializePageWithScrollOmni()};n.updatePageScroll=function(t,i,u,f,e,o,s,h){if(n.isTouch){var c=0;s?h?c=h:angular.element(u)&&(c=angular.element(u).outerHeight()):e&&(c=c+e*f);o&&(c+=o);r.destroyParamterizedScroll(t);setTimeout(function(){r.updatePageWithScrollOmni(t,i,u,c)},300)}}}angular.module("AuthPreferencesModule").controller("AuthPreferenceBaseController",n);n.$inject=["vm","AuthPreferenceService","AuthPreferenceConstants","$injector","$window"]}(),function(){"use strict";angular.module("AuthPreferencesModule").constant("AuthPreferenceConstants",{METHOD_GET:"GET",METHOD_POST:"POST",GetRCDList_URL:"MyProfile/GetRCDList",GetRCDInfo_URL:"MyProfile/GetRCDInfo",UpdateNickname_URL:"MyProfile/UpdateDeviceNickName",DisableFingerPrint_URL:"MyProfile/DisableFingerPrint",EnableDisablePush_URL:"MyProfile/EnablePushNotification",ShowHideDevice_URL:"MyProfile/ShowHideDevice",TEXT_USBWRAPPEROMNI:"usbwrapperOmni",TEXT_USBSCROLLEROMNI:"usbscrollerOmni",OTPMobilPreference_URL:"MyProfile/OTPMobilePreference",GetUserQuestions_URL:"/API/Auth/v1/IDShield/GetAllQuestions",GetAuthPreference_URL:"MyProfile/GetAuthPreference",PostQuestionAnswer_URL:"/API/Auth/v1/IDShield/UpdateUserQuestions",UpdateOTPDisabledFlag_URL:"MyProfile/UpdateOTPDisabledFlag",CCAPLanding_URL:"/CCAP/LandingPage.aspx",UserQuestions_URL:"MyProfile/AuthenticationPreferencesView#/GetUserQuestions",GetSessionID:"MyProfile/GetSessionID",GetReturnUrl:"MyProfile/GetReturnUrl",GetIDShieldRegisterRegisterUrl:"/API/Auth/v1/TransmitAPI/UpdatePldAuthenticator",GetAlwaysAskMeUrl:"/API/Auth/v1/IDShield/GetAlwaysAskForUser",SetAlwaysAskMeUrl:"/API/Auth/v1/IDShield/SetAlwaysAskForUser",SecurityAlertAPI_URL:"/API/Auth/v1/SecurityAlert/SendSecurityAlert",PrepForAdditionalAuthenticators_URL:"MyProfile/PrepForAdditionalAuthenticators",CreateTransmit_URL:"MyProfile/GetTransmitTokenForOrion",NonMonetoryTransaction:"100000001",AuthenticationTransaction:"100000002",Consumer:"100000000",alphanum_errormessage:"Please make sure you are entering only numbers, letters or the following special characters: (!@#$%&*-=_+':;<>?.,)",number_errormessage:"Please make sure you are entering only numbers.",monthyear_errormessage:"Please enter the date in this format: MM/YY.",date6_errormessage:"Please enter the date in this format: MM/DD/YY.",alpha_errormessage:"Please make sure that you are entering only letters. Do not use numbers or special characters, such as & or !",email_errormessage:"Please enter the Email Address in this format: name@domain.com.",time4_errormessage:"Please enter the time in this format: HH:MM",phone10_errormessage:"Please double-check your 10-digit phone number, and make sure you’re entering only numbers.",monthdate_errormessage:"Please enter the date in this format: MM/DD.",OTC_popupmessage:"To add a mobile number, please click on the “Add Your Mobile Information” link located in the My Profile page.",OTC_EditDeleteMessage:"While you can't edit or delete a one-time passcode, you can change your primary mobile number by selecting Continue, then Edit",IDShield_popupmessage:"These are questions you choose and answer with information that only you know.",VP_popupmessage:"This is a pattern you'll choose to enter into your device to prove your identity.",FP_popupmessage:"You can use your fingerprint to prove your identity and access you accounts.",OTPhelp_popupmessage:"This is a 6-digit code you’ll receive by text message to enter into your device.",FaceID_popupmessage:"Allows your device to recognize your face to prove your identity and access your accounts.",Validate_Account_Login:"Checking this box means you'll use one of the security options below, plus your password, to log in. If you select fingerprint scan or Face ID, you won't need a password on the mobile app.",OTP_popupmessage:"To use this feature, you'll need to add a mobile number to the user's account.",TransmitErrorMessage:"We're sorry. We are having problems on our end. It shouldn't be too long, so please try again shortly.",UnregisteredCaption:"UnRegister",RegisterClass:"authAction divActionItem divRegisterImage",UnRegisterClass:"authAction divActionItem divUnregisterImage",RegisteredCaption:"Register",InformationIconClass:"divActionItem divInformationIcon",EditOTPIconClass:"QAEditAction divActionItem divEditOTPImage",EditQAIconClass:"QAEditAction divActionItem divEditQAImage",IdShieldIconClass:"divActionItem firstColumnDiv IdShieldIcon margin-left",OTPIconClass:"divActionItem firstColumnDiv OTPIcon margin-left",VPIconClass:"divActionItem firstColumnDiv VPIcon margin-left",FPIconClass:"divActionItem firstColumnDiv FPIcon margin-left",defaultTickIconClass:"defaultItem divActionItem",UpdatePldAuthenticator_URL:"/API/Auth/v1/TransmitAPI/UpdatePldAuthenticator",TransmitStrings:{"progress.pleaseWait":"Please wait...","authMenu.title":"Authentication","authMenu.selectAuthenticator":"Please select authentication method:","configMenu.instructions":"Add, edit or remove authenticators","configMenu.title":"Authentication Options","password.inputPlaceholder":"Password","password.loginButton":"Sign In","password.prompt":"Please type your password","question.prompt":"Please answer the following","question.submitButton":"Submit","otp.prompt":"Input OTP code","otp.inputPlaceholder":"Input code here","otp.loginButton":"Login","otp.resendButton":"Resend OTP","totp.prompt":"Input OTP code","totp.inputPlaceholder":"Input OTP code","totp.loginButton":"Login","enroll.prompt":"Please scan the QR code below to bind your device.","enroll.continue":"Continue","mobileAuth.approvalPending":"Approval pending...","mobileAuthDeviceSelection.selectDevices":"Select devices for mobile approve:","mobileAuthDeviceSelection.select":"Select","mobilePin.authPending":"Authentication pending...","mobilePin.registrationPending":"Waiting for completion of registration on your mobile device.","mobilePin.registrationInstructions":"Please complete registration on your mobile device.","mobilePin.registerPrompt":"Please type your mobile phone number","mobilePin.registerInputPlaceholder":"Mobile phone number","mobilePin.registerSubmitButton":"Register","mobilePin.authTitle":"Login with Clickable SMS","mobilePin.authAskMobilePrompt":"Please input the last 4 digits of your mobile device phone number to login","mobilePin.authAskMobileInputPlaceholder":"","mobilePin.authAskSubmitButton":"Continue","mobilePin.authCfmMobilePrompt":"Confirm login with your mobile device","mobilePin.loginWith":"Login with ******","otpTargetSelection.selectTarget":"Select target for OTP:","error.xmapiError.invalidPassword":"Invalid password provided","error.xmapiError.invalidVoice":"Invalid voice provided","error.xmapiError.approvalDenied":"Mobile approval denied","error.xmapiError.allAuthenticatorsLocked":"All authenticators are locked","error.xmapiError.noRegisteredAuthenticator":"No registered authenticator is available","methodName.password":"Password","methodName.voice_server":"Voice Passphrase","methodName.otp":"OTP via $channel","methodName.mobile_approve":"Mobile Approve","methodName.mobile_pin":"Clickable SMS","methodName.question":"Question","otpMethodChannel.sms":"SMS","otpMethodChannel.email":"E-mail","otpMethodChannel.voice":"Voice","recoveryMenu.failed":"Authentication failed.","recoveryMenu.locked":"Authenticator locked.","recoveryMenu.title":"Recovery","failureAction.Fail":"Cancel","failureAction.RetryAction":"Change Authentication Method","failureAction.RetryMethod":"Retry","voice.prompt":"Please click the button below and speak the following phrase:","login.cancelButton":"Cancel","cancelMenu.title":"Cancel Action","cancelMenu.instructions":"Are you sure you want to cancel and go back?","cancelMenu.Cancel":"Yes","cancelMenu.Retry":"Try Again","cancelMenu.ChangeMethod":"Change Authentication Method","user.management.title":"User Management","user.management.cancelButton":"Cancel","newUser.title":"New User","newUser.cancelButton":"Cancel","methodFallback.text":"Having trouble logging in? We have other authentication options you can choose from. If you continue failing you may get locked out so switching to another option is recommended.","methodFallback.button":"Switch to another option","methodFallback.link":"Go back and let me try again"}})}(),function(){"use strict";function n(n,t,i,r,u,f,e,o){var s=n.getIsTouch()==="True"?!0:!1,v=s===!1?!1:screen.availWidth>=768?!0:!1,c,d,y,h,l,a=[],p={},w=!1,b,k=!1;return{isTouch:function(){return s},loadSpinner:function(){var n=document.getElementById("myProfileLoaderDiv"),i=document.querySelector("#myProfileLoaderDiv span"),t;e.lastActiveElement=document.activeElement;n!=null&&(n.setAttribute("tabindex","-1"),n.setAttribute("aria-busy","true"),i.innerHTML="Loading, please wait.",n.focus());t="a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, *[tabindex], *[contenteditable]";$("*","body").not("#myProfileLoaderDiv").find(t).attr("tabindex","-1")},unLoadSpinner:function(){var n=document.getElementById("myProfileLoaderDiv"),r=document.querySelector("#myProfileLoaderDiv span"),t=e.lastActiveElement,i;n!=null&&(n.removeAttribute("tabindex"),n.setAttribute("aria-busy","false"),r.innerHTML="",t!=null&&t.focus());i="a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, *[tabindex], *[contenteditable]";$("body").find(i).removeAttr("tabindex")},isTablet:function(){return v},isMobileWeb:function(){return s&&ApplicationContext!=undefined&&ApplicationContext!=null&&(c=ApplicationContext.getContext().ISMOBILEWEB),c},getparamsFromNative:function(){return b},setParamsFromNative:function(n){b=n},IDShieldQuestionsService:function(n,t,i){var r=this.getBaseURL();return e.loading=!0,this.loadSpinner(),o({method:t,headers:{"Content-Type":"application/x-www-form-urlencoded"},url:r+i,data:n})},IDShieldQuestionsSubmit:function(n,t,i){var r=this.getBaseURL();return e.loading=!0,this.loadSpinner(),o({method:t,headers:{"Content-Type":"application/json"},url:r+i,data:n})},ApiServiceCall:function(n,t,i){var r=this.getBaseURL();return e.loading=!0,this.loadSpinner(),o({method:t,headers:{"Content-Type":"application/json"},url:r+i,data:n})},UpdatePlaceholderStatus:function(n,t,i){var r=this.getBaseURL();return e.loading=!0,this.loadSpinner(),o({method:n,headers:{"Content-Type":"application/json"},url:r+t,data:i})},IDShieldSecurityAlert:function(n,t,i){var r=this.getBaseURL();return e.loading=!0,this.loadSpinner(),o({method:t,headers:{"Content-Type":"application/json"},url:r+i,data:n})},getBaseURL:function(){var n=this.getparamsFromNative(),t="";return angular.isUndefined(n)||(t=n.TransmitAppID),t==="mbl"?this.getparamsFromNative().IDShieldBaseURL:document.getElementById("divRootBaseURL").value},RedirectTOFAQ:function(n,t){var o="",i=document.createElement("form"),r,u,f,e;i.setAttribute("method","post");i.setAttribute("action",n);o="";r=document.createElement("input");r.setAttribute("type","hidden");r.setAttribute("name","FunctionName");r.setAttribute("value","IdShieldFaq");u=document.createElement("input");u.setAttribute("type","hidden");u.setAttribute("name","Returnurl");u.setAttribute("value",t);f=document.createElement("input");f.setAttribute("type","hidden");f.setAttribute("name","Timeout");f.setAttribute("value","1000");e=document.createElement("input");e.setAttribute("type","hidden");e.setAttribute("name","WarningTimeout");e.setAttribute("value","1000");i.appendChild(r);i.appendChild(u);i.appendChild(f);i.appendChild(e);document.body.appendChild(i);i.submit();document.body.removeChild(i)},isEntitlementReturnUser:function(){return s&&h==undefined?h=OmniDataUtil.getOmniData("isFromManageDelegatesMenu"):s||h!=undefined||(h=document.getElementById("divIsManageDelegates").value==="true"),s&&h&&OmniDataUtil.setOmniData("isFromManageDelegatesMenu",!1),h},isBanker:function(){if(document.getElementById("isBankerFromMaster"))return document.getElementById("isBankerFromMaster").value==="True"},isNewEnrolledUser:function(){return w},setNewEnrolledUser:function(n){w=n},setEditButtonFocusValue:function(){k=!0},getEditButtonFocusValue:function(){return k},getLpid:function(){return y},setLpid:function(n){y=n},getDelegateInfo:function(){return l},setDelegateInfo:function(n){l=n;a.push(l)},getDelegatesList:function(){return a},setDelegatesList:function(n){a=n},getIDSheildQAList:function(){return p},setIDSheildQAList:function(n){p=n},getOLSServiceRootUrl:function(){var n=document.getElementById("divRootUrl");return typeof n!="undefined"&&n!=null?n.value||n.innerText||n.textContent:""},setOLSServiceRootUrl:function(n){d=n},result:function(t,i,r){var o=f.defer(),s=this,h=document.getElementById("divRootProject"),u;return u=h!=undefined&&h!=null?s.getOLSServiceRootUrl():this.getBaseURL()+"/",e.loading=!0,this.loadSpinner(),n.result(t,u+i,r).success(function(n){e.loading=!1;s.unLoadSpinner();o.resolve(n)}),o.promise},clearHeaders:function(){n.setOTPToken(t.EMPTY);n.setStepUpToken(t.EMPTY)},cancelTransaction:function(){this.clearHeaders();s&&n.destroyOmniScope()},navigateClickOnCancel:function(n){if(!s){window.location=document.getElementById("divCustomerDashBoardURL").value;return}window.location=v&&!c?n==="logout"?"#loginservice/logoutUserAndExit":"#tabletaccountview/fetchMyAccounts":n==="logout"?"#loginservice/logoutUserAndExit":"#accountview/fetchMyAccounts"},touchScroll:function(n){var t=document.getElementsByClassName(n),i,r;if(angular.isDefined(t)&&t!==null)for(i=0;i<t.length;i++)r=0,t[i].addEventListener("touchstart",function(n){r=this.scrollTop+n.touches[0].pageY;n.stopImmediatePropagation()},!1),t[i].addEventListener("touchmove",function(n){this.scrollTop=r-n.touches[0].pageY;n.stopImmediatePropagation()},!1)}}}angular.module("AuthPreferencesModule").factory("AuthPreferenceService",n);n.$inject=["CommonService","CommonConstants","AuthPreferenceConstants","$window","$injector","$q","$rootScope","$http"]}(),function(){"use strict";function n(n,t,i,r,u,f,e,o,s){var h=this,c;t("AuthPreferenceBaseController",{vm:h});h.isError=!1;h.TransmitErrorMsg="";c=!1;setTimeout(function(){var n=document.getElementById("aaDeviceHeader");h.isTouch&&n!=null&&n.focus()},500);i.MyProfileDashboardRedirection=function(){var i="",t;h.isTouch?i=document.getElementById("isLoginAssistanceFlow").value=="1"?document.getElementById("divAAPageTUXReturnURL").value:document.getElementById("isLoginAssistTuxOutSession").value=="1"?document.getElementById("tuxLoginAssistOutSessionURL").value:document.getElementById("divCCAPURL").value:(t=document.getElementById("returnUrl"),i=t&&t.value!=""?t.value:document.getElementById("isLoginAssistanceFlow").value=="1"?document.getElementById("divCustomerDashBoardURL").value:document.getElementById("divMyProfileDashBoardURL").value);n.loading=!0;u.loadSpinner();window.location=i};i.UpdateMyProfileRedirection=function(){var n,i,r,u,f,e,o,s,t;document.getElementById("isLoginAssistTuxOutSession").value=="1"&&h.isTouch?(n=document.createElement("form"),n.setAttribute("method","post"),n.setAttribute("action",document.getElementById("mobileCCAPInitialLandingURL").value),i=document.createElement("input"),i.setAttribute("type","hidden"),i.setAttribute("name","Function"),i.setAttribute("value","MyProfile"),r=document.createElement("input"),r.setAttribute("type","hidden"),r.setAttribute("name","CCAPUrl"),r.setAttribute("value",document.getElementById("mobileCCAPInitialLandingURL").value),t=document.createElement("input"),t.setAttribute("type","hidden"),t.setAttribute("name","returnURL"),t.setAttribute("value",document.getElementById("tuxLoginAssistOutSessionURL").value),u=document.createElement("input"),u.setAttribute("type","hidden"),u.setAttribute("name","CancelURL"),u.setAttribute("value",document.getElementById("tuxLoginAssistOutSessionURL").value),f=document.createElement("input"),f.setAttribute("type","hidden"),f.setAttribute("name","Channel"),f.setAttribute("value","USBAPP"),e=document.createElement("input"),e.setAttribute("type","hidden"),e.setAttribute("name","BackgroundTheme"),e.setAttribute("value","defaultblue_layout"),o=document.createElement("input"),o.setAttribute("type","hidden"),o.setAttribute("name","feature_config_appTimeout"),o.setAttribute("value","300000"),s=document.createElement("input"),s.setAttribute("type","hidden"),s.setAttribute("name","TransmitToken"),s.setAttribute("value","SampleValueForSkippingStepup"),n.appendChild(i),n.appendChild(r),n.appendChild(t),n.appendChild(u),n.appendChild(f),n.appendChild(e),n.appendChild(o),n.appendChild(s),document.body.appendChild(n),n.submit(),document.body.removeChild(n)):(t="",t=h.isTouch?document.getElementById("divCCAPURL").value:document.getElementById("divMyProfileDashBoardURL").value,window.location=t)};i.returnToCEI=function(){window.close()};i.isNotFromCEI=function(){var n=document.getElementById("hdnIsFromCEI").value;return n=="1"?!1:!0};i.onClosePopup=function(){this.$close();window.location.reload()};i.isFromDifferentHost=function(){var n=document.getElementById("hdnIsRequestFromSameHost").value,t=document.getElementById("isLoginAssistanceFlow").value,i=document.getElementById("isLoginAssistTuxOutSession").value;return n=="1"||t=="1"||i=="1"?!1:!0};i.SetIsAlwaysAskFlag=function(){var t={},r=i.isFromDifferentHost();t.IsAlwaysAsk=this.AlwaysAskForAuth;t.ApplicationId="web";t.TransactionType=f.AuthenticationTransaction;t.CustomerType=f.Consumer;t.IsBanker=r;u.ApiServiceCall(t,f.METHOD_POST,f.SetAlwaysAskMeUrl).then(function(t){t.status!=200&&(h.isError=!0,h.TransmitErrorMsg=f.TransmitErrorMessage,i.AlwaysAskForAuth=!i.AlwaysAskForAuth);n.loading=!1;u.unLoadSpinner();$("#askForAuth").focus()})};requirejs(["xm/xmui","xm/xm_api"],function(t,o){function w(){function rt(r,e){t.startConfigurationMenuUi(r,b,e).then(function(){window.location.reload()},function(t){n.loading=!1;u.unLoadSpinner();h.isError=!0;h.TransmitErrorMsg=f.TransmitErrorMessage;setInterval(function(){i.$apply()},0);console.log(t)})}function ut(n){function t(n){var t=[];return n.locked&&t.push("xmuiMethodMenuAnnLocked"),n.status==="registered"?t.push("xmuiMethodMenuAnnUnregister"):t.push("xmuiMehtodMenuAnnRegister"),n.expired&&t.push("xmuiMehtodMenuAnnExpired"),n.isDefault&&t.push("xmuiMethodMenuAnnDefault"),t}g=n;var i=n.map(function(n){return{method:n,title:ot(n),classes:["xmuiMethodMenuItem","xmuiMethodMenu_"+n.type],annunciators:t(n),registered:n.status==="registered",expired:n.expired,locked:n.locked,disabled:n.disabled}});return v=i,ft()}function ft(){return new Promise(function(){function t(){var e=[],l=3,r,t,y,o,n,h,c,a;for(e=[],console.log(v),r=0;r<v.length;r++){if(t={},y=v[r].method.isDefault,v[r].title.indexOf("qa")>-1&&(v[r].title="ID Shield Questions"),v[r].title.indexOf("otp")>-1&&(v[r].title="One-time Passcode Via SMS"),t.method=v[r].method.type,o=v[r].registered,t.action=o?"unregister":"register",t.bgColorClass="",t.classValues=[],t.ActionClass=[],t.AdditionalActionClass=[],n={},n.Name=v[r].title,n.Voice=v[r].title,n.Class="spanAuthText authItem",t.classValues.push(n),i.isFromDifferentHost()||(n={},n.Name="",v[r].title=="ID Shield Questions"&&(n.Class=f.EditQAIconClass,n.Voice="Edit "+v[r].title,n.CaptionName="Edit",t.ActionClass.push(n))),n={},n.Name="",v[r].title=="ID Shield Questions"?(n.Class=o?"":f.RegisterClass,o||(n.Voice="Add "+v[r].title,n.CaptionName="Add")):v[r].title=="One-time Passcode Via SMS"&&(o?i.isFromDifferentHost()||(n={},n.Name="",n.Class=f.EditOTPIconClass,n.Voice="Edit "+v[r].title,n.CaptionName="Edit"):(n={},n.Name="",n.Class=f.RegisterClass,t.action="register",n.Voice="Add "+v[r].title,n.CaptionName="Add")),n.Class!=""&&t.ActionClass.push(n),n={},n.Name="",n.Class=f.InformationIconClass,n.Voice="Help "+v[r].title,n.CaptionName="Help",t.ActionClass.push(n),t.index=l++,h={},t.ActionClass!=null&&t.ActionClass.length<3&&(t.ActionClass.length==1?(t.AdditionalActionClass.push(h),t.AdditionalActionClass.push(h)):t.ActionClass.length==2&&t.AdditionalActionClass.push(h)),t.ActionClass!=null)for(c=0;c<t.ActionClass.length;c++)t.ActionClass[c].index=l++;e.push(t)}a=["placeholder_VP","placeholder_FP","placeholder_FaceID"];e=et(e,a,l);i.authenticators=e;i.$digest();u.getEditButtonFocusValue()&&s(function(){$(".divEditQAImage").focus()},0)}n.loading=!1;u.unLoadSpinner();t(g)})}function et(n,t,i){for(var u,r,h,o,s,e=0;e<t.length;e++){for(u={},u.method=t[e],u.index=i++,u.action="",u.bgColorClass="bg-color-disabled",u.classValues=[],u.ActionClass=[],u.AdditionalActionClass=[],r={},t[e]=="placeholder_VP"&&(r.Name="Visual Pattern",r.Voice="Visual Pattern"),t[e]=="placeholder_FP"&&(r.Name="Fingerprint Scan",r.Voice="Fingerprint Scan"),t[e]=="placeholder_FaceID"&&(r.Name="Face ID (iPhone X)",r.Voice="Face ID for iPhone X"),h=r.Name+" Help",r.Class="spanAuthText",u.classValues.push(r),r={},r.Voice=h,r.Name="",r.Class=f.InformationIconClass,r.CaptionName="Help",u.ActionClass.push(r),o=0;o<u.ActionClass.length;o++)u.ActionClass[o].index=i++;s={};u.AdditionalActionClass.push(s);u.AdditionalActionClass.push(s);n.push(u)}return n}function ot(n){return n.type==="otp"?w("methodName."+n.type).replace("$channel",w("otpMethodChannel."+n.channels[0].type)):n.type==="registration"?w("methodName."+n.method):w("methodName."+n.type)}function w(n){return y[n]!=null?y[n]:n}function st(t,r,u){u=="register"?i.isFromDifferentHost()?(n.titleMsg="Add One-time Passcode Via SMS",n.deviceinformation_popupmsg=f.OTP_popupmessage,d()):(n.titleMsg="Add One-time Passcode Via SMS",k(f.OTC_popupmessage)):(n.titleMsg="Edit One-time Passcode Via SMS",k(f.OTC_EditDeleteMessage))}function nt(n){function f(){document.activeElement===i&&(n.preventDefault(),r.focus())}function e(){document.activeElement===r&&(n.preventDefault(),i.focus())}var u=document.getElementById("aaOverlayContainer"),t=u.querySelectorAll('a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), [tabindex="0"]');t=Array.prototype.slice.call(t);var i=t[0],r=t[t.length-1];switch(n.keyCode){case 9:if(t.length===1){n.preventDefault();break}n.shiftKey?f():e()}}function d(){var i,u,f,t;parent.document.getElementById("cmsiframecontent")!=undefined&&parent.document.getElementById("cmsiframecontent")!=null&&(parent.document.getElementById("cmsiframecontent").style.height="");n.twoButton=!1;n.oneButton=!0;i={};i.templateUrl=n.templatePath+"Overlay.html";r.popup("OverlayJS",i,!0);h.isTouch||(u=document.getElementById("overlayDocumentWrapper"),u!=null&&u.setAttribute("role","document"));f="a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, *[tabindex], *[contenteditable]";$("*","body").not(".modal-dialog").find(f).attr("tabindex","-1");setTimeout(function(){var n=null;n=h.isTouch?document.getElementById("aaOverlayContainer"):document.getElementById("popupOkButton");n!=null&&n.focus()},250);t=document.getElementsByClassName("ui-panel-wrapper")[0];t!=undefined||t!=null?h.isTouch&&t.setAttribute("aria-hidden","true"):(t=parent.document.getElementsByClassName("ui-panel-wrapper")[0],h.isTouch&&t!=null&&t.setAttribute("aria-hidden","true"));sessionStorage.setItem("isDialogOpen",!0);$(document).on("keydown",function(n){var t=sessionStorage.getItem("isDialogOpen");t==!0&&nt(n)})}function k(t){var f,e,o,u;parent.document.getElementById("cmsiframecontent")!=undefined&&parent.document.getElementById("cmsiframecontent")!=null&&(parent.document.getElementById("cmsiframecontent").style.height="");n.deviceinformation_popupmsg=t;n.ContinueEvent=i.UpdateMyProfileRedirection;n.twoButton=!0;n.oneButton=!1;n.continueButton="Continue";n.cancelButton="Close";f={};f.templateUrl=n.templatePath+"Overlay.html";r.popup("OverlayJS",f,!0);h.isTouch||(e=document.getElementById("overlayDocumentWrapper"),e!=null&&e.setAttribute("role","document"));o="a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, *[tabindex], *[contenteditable]";$("*","body").not(".modal-dialog").find(o).attr("tabindex","-1");setTimeout(function(){var n=null;n=h.isTouch?document.getElementById("aaOverlayContainer"):document.getElementById("popupContinueButton");n!=null&&n.focus()},250);u=document.getElementsByClassName("ui-panel-wrapper")[0];u!=undefined||u!=null?h.isTouch&&u.setAttribute("aria-hidden","true"):(u=parent.document.getElementsByClassName("ui-panel-wrapper")[0],h.isTouch&&u!=null&&u.setAttribute("aria-hidden","true"));sessionStorage.setItem("isDialogOpen",!0);$(document).on("keydown",function(n){var t=sessionStorage.getItem("isDialogOpen");t==!0&&nt(n)})}function ht(t){switch(t.closest("li")[0].attributes.methodName.value){case"placeholder_otp_placeholder":n.titleMsg="Help One-time Passcode Via SMS";n.deviceinformation_popupmsg=f.OTPhelp_popupmessage;t.attr("data-currentitem",!0);break;case"placeholder_qa":n.titleMsg="Help ID Shield Questions";n.deviceinformation_popupmsg=f.IDShield_popupmessage;t.attr("data-currentitem",!0);break;case"placeholder_VP":n.titleMsg="Visual Pattern Help";n.deviceinformation_popupmsg=f.VP_popupmessage;t.attr("data-currentitem",!0);break;case"placeholder_FP":n.titleMsg="Fingerprint Scan Help";n.deviceinformation_popupmsg=f.FP_popupmessage;t.attr("data-currentitem",!0);break;case"placeholder_FaceID":n.titleMsg="Face ID (iPhone X) Help";n.deviceinformation_popupmsg=f.FaceID_popupmessage;t.attr("data-currentitem",!0);break;case"placeholder_aval":n.titleMsg="Help Valid Accont Login";n.deviceinformation_popupmsg=f.Validate_Account_Login;t.attr("data-currentitem",!0)}d()}function tt(n){n.closest("li")[0].attributes.methodName.value=="placeholder_otp_placeholder"&&(st(n.closest("li")[0].attributes.action.value=="register"?!1:!0,n.closest("li")[0].attributes.methodName.value,n.closest("li")[0].attributes.action.value),n.attr("data-currentitem",!0))}var it={loginConf:{aid:a,policy:"default_config"},authenticationMethodPromiseOverrides:{configMenu:ut}},g,v;o.setWebloginUrl(p);o.preCollect();t.configure(it);$("body").on("click touchend",".divEditQAImage",function(){e.go("GetUserQuestions")});$("body").on("keydown",".divEditQAImage",function(n){!h.isTouch&&(n.keyCode&&(n.keyCode==13||n.keyCode==32)||n.which&&(n.which==13||n.which==32))&&e.go("GetUserQuestions")});$("body").on("click touchend",".divEditOTPImage",function(){c||($(this).attr("data-currentitem",!0),n.titleMsg="Edit One-time Passcode Via SMS",k(f.OTC_EditDeleteMessage));c=!1});$("body").on("keydown",".divEditOTPImage",function(t){c=!0;!h.isTouch&&(t.keyCode&&(t.keyCode==13||t.keyCode==32)||t.which&&(t.which==13||t.which==32))&&($(this).attr("data-currentitem",!0),n.titleMsg="Edit One-time Passcode Via SMS",k(f.OTC_EditDeleteMessage))});$("body").on("click touchend",".divInformationIcon",function(n){ht($(this));n.preventDefault();n.stopImmediatePropagation()});$("body").on("click touchend",".authAction",function(n){c||(tt($(this)),n.stopImmediatePropagation());c=!1});$("body").on("keydown",".authAction",function(n){c=!0;!h.isTouch&&(n.keyCode&&(n.keyCode==13||n.keyCode==32)||n.which&&(n.which==13||n.which==32))&&(tt($(this)),n.stopImmediatePropagation())});rt(l,$("#menuConfigTable"))}function k(i){var r={loginConf:{aid:i,policy:"login_obo"},authenticationMethodPromiseOverrides:{placeholder_password_pld:{input:d}}},c=f.TransmitStrings;t.configure(r);o.setWebloginUrl(p);o.preCollect();var e=l,s=document.all("loginui"),h=t.startInlineUi(e,s);h.then(function(){w();n.loading=!1;u.unLoadSpinner()},function(){n.loading=!1;u.unLoadSpinner()})}function d(n){return v=n.placeholderContextData,new Promise(function(n,t){g();i.PasswordSuccess=function(i){i?n({token:i}):t("Error: Placeholder token is empty")}})}function g(){var n={ContextData:v,AppId:"web",UserName:l};u.result(f.METHOD_POST,f.CreateTransmit_URL,n).then(function(n){n&&n.StatusCode==0&&i.PasswordSuccess(n.TransmitToken)})}var y=f.TransmitStrings,p=location.protocol+"//"+location.host+document.getElementById("divTransmitUrlLogin").value,l=document.getElementById("divAuthPrefUserId").value,b=null,a="web",v;u.result(f.METHOD_POST,f.PrepForAdditionalAuthenticators_URL,{ApplicationId:"web"}).then(function(t){t.StatusCode!=0?(h.isError=!0,h.TransmitErrorMsg=f.TransmitErrorMessage):(i.AlwaysAskForAuth=t.IsAlwaysAsk,i.isFromDifferentHost()?(a="web",n.loading=!0,u.loadSpinner(),k(a)):w())});v=null})}angular.module("AuthPreferencesModule").controller("AuthenticationPreferencesController",n);n.$inject=["$rootScope","$controller","$scope","OpenModalService","AuthPreferenceService","AuthPreferenceConstants","$state","$compile","$timeout"]}(),function(){"use strict";function n(n,t,i,r,u){var e=this,f;i("AuthPreferenceBaseController",{vm:e});f={};f.UserId="SuperMob01";r.result(u.METHOD_POST,u.OTPMobilPreference_URL,f).then(function(n){e.PhoneNoList=n.PhoneNoList})}angular.module("AuthPreferencesModule").controller("OTPMobilePreferenceController",n);n.$inject=["$scope","$state","$controller","AuthPreferenceService","AuthPreferenceConstants"]}(),function(){"use strict";function n(n,t,i,r,u,f,e){var o=this,c;i("AuthPreferenceBaseController",{vm:o});c={};n.limit;var s=[],h,l=document.getElementById("divRootProject");o.UserQuestionList={isAskMeSelected:!1,data:[],limit:10};r.IDShieldQuestionsService(c,u.METHOD_POST,u.GetUserQuestions_URL).then(function(n){var t="",i=r.getparamsFromNative();angular.isUndefined(i)||(t=i.TransmitAppID);f.loading=!1;r.unLoadSpinner();parent.document.querySelector(".header-layout h1")!=null&&parent.document.querySelector(".header-layout h1")!=undefined&&angular.element(parent.document.querySelector(".header-layout h1")).attr("aria-hidden","true");parent.document.querySelector(".header-layout #headerShield")!=null&&parent.document.querySelector(".header-layout #headerShield")!=undefined&&angular.element(parent.document.querySelector(".header-layout #headerShield")).attr("aria-hidden","true");n.status==200?o.UserQuestionList.data=n.data:(l==null||l==undefined)&&f.$broadcast("IDShieldConfig",n.status);t==="mbl"&&setTimeout(function(){document.getElementById("authOptions").focus()},1300)});setTimeout(function(){var n=document.getElementById("idShieldQnAHeader");n!=null&&n.focus()},500);n.validateQuestionsCount=function(){for(s={isAskMeSelected:!1,data:{Questions:[]}},h=0;h<o.UserQuestionList.data.Questions.length;h++)n.validateInput(o.UserQuestionList.data.Questions[h]);s!=null&&s!=""&&(s.isAskMeSelected=o.UserQuestionList.isAskMeSelected,r.setIDSheildQAList(s),s.data.Questions.length<3||s.data.Questions.length>5?(document.getElementById("shield_errormessage").style.display="block",document.getElementById("questionLimit").innerHTML="Please select at least 3 ID Shield questions but no more than 5."):(document.getElementById("shield_errormessage").style.display="none",document.getElementById("questionLimit").innerHTML="",t.go("GetUserQuestionsReview")))};n.showMoreQuestions=function(){var n,t,i;o.UserQuestionList.limit=o.UserQuestionList.limit+10;n="";t=r.getparamsFromNative();angular.isUndefined(t)||(n=t.TransmitAppID);n==="mbl"&&(i=$(".sharedauth-modal-open").height()+1e3,$(".sharedauth-modal-open").css("height",i));o.UserQuestionList.limit>10&&o.UserQuestionList.limit<21&&e(function(){var n=document.getElementById("questionCheckbox10");n!=null&&n!=undefined&&n.focus()},0);(o.UserQuestionList.data.length==o.UserQuestionList.limit||o.UserQuestionList.limit>20)&&e(function(){var n=document.getElementById("questionCheckbox20");n!=null&&n!=undefined&&n.focus();document.getElementById("showmorequestions").style.display="none"},500)};n.MyProfileDashboardRedirection=function(){if(o.isTouch&&document.getElementById("divQAMobileFlow").value=="Yes")window.location="https://m.usbank.com/DMAuthPreference.html";else{var n=document.getElementById("divRootProject");n!=undefined&&n!=null?r.result(u.METHOD_POST,u.GetReturnUrl,{}).then(function(n){n!=null&&n!=""?window.location=n:(r.setEditButtonFocusValue(),t.go("AuthenticationPreferences"))}):f.$broadcast("BackToMyDashBoard")}};n.checkboxClicked=function(){var n=event.target.id;setTimeout(function(){document.getElementById(n).focus()},300)};n.IDShieldFAQ=function(){var t="",i=r.getparamsFromNative(),f,n;angular.isUndefined(i)||(t=i.TransmitAppID);t==="mbl"?(n=r.getBaseURL()+"OLS/IDShield/QA/FAQ",f=r.getBaseURL()+u.CCAPLanding_URL,r.RedirectTOFAQ(f,n).then(function(){})):(n=angular.element(document.querySelector("#divRootOLSUrl")).val(),n+=u.UserQuestions_URL,r.RedirectTOFAQ(u.CCAPLanding_URL,n).then(function(){}))};n.validateInput=function(n){if(n.isSelected)if(n.input_answer!=null){var t="";switch(n.AnswerFormatName){case"MMYY":t=/^(0?[1-9]|1[012])[/]\d\d$/;n.errorMessage=u.monthyear_errormessage;break;case"DATE6":t=/^(0?[1-9]|1[012])[/](0?[1-9]|[12][0-9]|3[01])[/]\d\d$/;n.errorMessage=u.date6_errormessage;break;case"TIME4":t=/^([0-9]|0[0-9]|1[0-9]|2[0-3]):[0-5][0-9]$/;n.errorMessage=u.time4_errormessage;break;case"PHONE10":t=/^[0-9]{10}$/;n.errorMessage=u.phone10_errormessage;break;case"MMDD":t=/^(0?[1-9]|1[012])[/](0?[1-9]|[12][0-9]|3[01])$/;n.errorMessage=u.monthdate_errormessage}n.isInvalid=t==""?!1:!t.test(n.input_answer);n.isInvalid||s.data.Questions.push(n)}else document.getElementById("errormessage_emptytext").style.display="block",document.getElementById("questionWarning").innerHTML="Please make sure you have answered all selected questions.",document.getElementById("shield_errormessage").style.display="block",document.getElementById("questionLimit").innerHTML="Please select at least 3 ID Shield questions but no more than 5."}}var t=angular.module("AuthPreferencesModule").controller("GetUserQuestionsController",n);n.$inject=["$scope","$state","$controller","AuthPreferenceService","AuthPreferenceConstants","$rootScope","$timeout"]}(),function(){"use strict";function n(n,t,i,r,u){var f=this,e=document.getElementById("divRootProject");i("AuthPreferenceBaseController",{vm:f});f.iDSheildQAList=r.getIDSheildQAList();e==null&&u.$broadcast("NotifySiteCat","100");n.IDShieldConfirmation=function(){t.go("GetUserQuestionsConfirmation")};n.BackButtonClick=function(){t.go("GetUserQuestions")};window.scroll(0,0)}var t=angular.module("AuthPreferencesModule").controller("GetUserQuestionsReviewController",n);n.$inject=["$scope","$state","$controller","AuthPreferenceService","$rootScope"]}(),function(){"use strict";function n(n,t,i,r,u,f){function y(){r.IDShieldQuestionsSubmit(o,u.METHOD_POST,u.PostQuestionAnswer_URL).then(function(n){if(n.status===200)if(h==undefined&&h==null)l=n.status;else r.result(u.METHOD_POST,u.GetReturnUrl,{}).then(function(n){n!=null&&(v=n)});else l=n.statusCode;f.loading=!1;r.unLoadSpinner()})}var e=this,v="",h=document.getElementById("divRootProject"),l=0,o,s,c,a;for(i("AuthPreferenceBaseController",{vm:e}),e.iDSheildQAList=r.getIDSheildQAList(),h==null&&f.$broadcast("NotifySiteCat","101"),n.MyProfileDashboardRedirection=function(){e.isTouch&&document.getElementById("divQAMobileFlow").value=="Yes"?window.location="https://m.usbank.com/DMAuthConfirmation.html":h!=undefined&&h!=null?t.go("AuthenticationPreferences"):f.$broadcast("IDShieldConfig",l)},o={},o.QuestionAnswers=[],s=0;s<e.iDSheildQAList.data.Questions.length;s++)c={},c.QuestionText=e.iDSheildQAList.data.Questions[s].Text,c.QuestionId=e.iDSheildQAList.data.Questions[s].Id,c.Answer=e.iDSheildQAList.data.Questions[s].input_answer,o.QuestionAnswers.push(c);o.TransactionType=u.AuthenticationTransaction;o.CustomerType=u.Consumer;o.IsBanker=!1;o.ApplicationId=e.isTouch&&!e.isMobileWeb?"mbl":"web";a={};r.result(u.METHOD_POST,u.GetSessionID,a).then(function(n){o.SessionID=n;y()})}var t=angular.module("AuthPreferencesModule").controller("GetUserQuestionsConfirmationController",n);n.$inject=["$scope","$state","$controller","AuthPreferenceService","AuthPreferenceConstants","$rootScope"]}(),function(){"use strict";function n(n,t,i,r){n.onClosePopup=function(){var t,n;this.$close();$("#configMenuDiv").find("button[data-currentitem=true]")[0].focus();$("#configMenuDiv").find("button[data-currentitem=true]").removeAttr("data-currentitem");t="a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, *[tabindex], *[contenteditable]";$("body").find(t).removeAttr("tabindex");n=document.getElementsByClassName("ui-panel-wrapper")[0];u.isTouch&&n!=null&&n.removeAttribute("aria-hidden");sessionStorage.setItem("isDialogOpen",!1)};n.CancelEvent=function(){var t,n;this.$close();$("#configMenuDiv").find("button[data-currentitem=true]")[0].focus();$("#configMenuDiv").find("button[data-currentitem=true]").removeAttr("data-currentitem");t="a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, *[tabindex], *[contenteditable]";$("body").find(t).removeAttr("tabindex");n=document.getElementsByClassName("ui-panel-wrapper")[0];u.isTouch&&n!=null&&n.removeAttribute("aria-hidden");sessionStorage.setItem("isDialogOpen",!1)};t(function(){document.querySelector("#dialogDesc").focus()},0);n.buttonFocussed=!1;n.headingFocussed=!1;var u=this;r("AuthPreferenceBaseController",{vm:u});n.PopupNavigation=function(r){if(!u.isTouch){var f=r.key==="Tab"||r.keyCode===9;f&&(r.shiftKey?n.headingFocussed&&(n.headingFocussed=!1,console.log(i.twoButton),t(function(){i.twoButton?document.querySelector("#popupCancelButton").focus():document.querySelector("#popupOkButton").focus()},0),n.buttonFocussed=!0,r.preventDefault()):n.buttonFocussed&&(n.buttonFocussed=!1,t(function(){document.querySelector("#dialogDesc").focus()},0),n.headingFocussed=!0,r.preventDefault()))}}}angular.module("AuthPreferencesModule").controller("OverlayJS",n);n.$inject=["$scope","$timeout","$rootScope","$controller"]}(),!window.Promise){var setTimeoutFunc=setTimeout;function noop(){}function bind(n,t){return function(){n.apply(t,arguments)}}Promise=function(n){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");if(typeof n!="function")throw new TypeError("not a function");this._state=0;this._handled=!1;this._value=undefined;this._deferreds=[];doResolve(n,this)};function handle(n,t){while(n._state===3)n=n._value;if(n._state===0){n._deferreds.push(t);return}n._handled=!0;Promise._immediateFn(function(){var i=n._state===1?t.onFulfilled:t.onRejected,r;if(i===null){(n._state===1?resolve:reject)(t.promise,n._value);return}try{r=i(n._value)}catch(u){reject(t.promise,u);return}resolve(t.promise,r)})}function resolve(n,t){try{if(t===n)throw new TypeError("A promise cannot be resolved with itself.");if(t&&(typeof t=="object"||typeof t=="function")){var i=t.then;if(t instanceof Promise){n._state=3;n._value=t;finale(n);return}if(typeof i=="function"){doResolve(bind(i,t),n);return}}n._state=1;n._value=t;finale(n)}catch(r){reject(n,r)}}function reject(n,t){n._state=2;n._value=t;finale(n)}function finale(n){n._state===2&&n._deferreds.length===0&&Promise._immediateFn(function(){n._handled||Promise._unhandledRejectionFn(n._value)});for(var t=0,i=n._deferreds.length;t<i;t++)handle(n,n._deferreds[t]);n._deferreds=null}function Handler(n,t,i){this.onFulfilled=typeof n=="function"?n:null;this.onRejected=typeof t=="function"?t:null;this.promise=i}function doResolve(n,t){var i=!1;try{n(function(n){i||(i=!0,resolve(t,n))},function(n){i||(i=!0,reject(t,n))})}catch(r){if(i)return;i=!0;reject(t,r)}}Promise.prototype["catch"]=function(n){return this.then(null,n)};Promise.prototype.then=function(n,t){var i=new this.constructor(noop);return handle(this,new Handler(n,t,i)),i};Promise.all=function(n){var t=Array.prototype.slice.call(n);return new Promise(function(n,i){function f(r,e){try{if(e&&(typeof e=="object"||typeof e=="function")){var o=e.then;if(typeof o=="function"){o.call(e,function(n){f(r,n)},i);return}}t[r]=e;--u==0&&n(t)}catch(s){i(s)}}var u,r;if(t.length===0)return n([]);for(u=t.length,r=0;r<t.length;r++)f(r,t[r])})};Promise.resolve=function(n){return n&&typeof n=="object"&&n.constructor===Promise?n:new Promise(function(t){t(n)})};Promise.reject=function(n){return new Promise(function(t,i){i(n)})};Promise.race=function(n){return new Promise(function(t,i){for(var r=0,u=n.length;r<u;r++)n[r].then(t,i)})};Promise._immediateFn=typeof setImmediate=="function"&&function(n){setImmediate(n)}||function(n){setTimeoutFunc(n,0)};Promise._unhandledRejectionFn=function(n){typeof console!="undefined"&&console&&console.warn("Possible Unhandled Promise Rejection:",n);dispatchUnhandledRejectionEvent({},n)};Promise._setImmediateFn=function(n){Promise._immediateFn=n};Promise._setUnhandledRejectionFn=function(n){Promise._unhandledRejectionFn=n};function dispatchUnhandledRejectionEvent(n,t){var i=document.createEvent("Event");Object.defineProperties(i,{promise:{value:n,writable:!1},reason:{value:t,writable:!1}});i.initEvent("unhandledrejection",!1,!0);window.dispatchEvent(i)}window.Promise=Promise}typeof Object.assign!="function"&&(Object.assign=function(n){"use strict";var u,i,t,r;if(n==null)throw new TypeError("Cannot convert undefined or null to object");for(u=Object(n),i=1;i<arguments.length;i++)if(t=arguments[i],t!=null)for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&(u[r]=t[r]);return u});Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(n){var i,u,f,t,r;if(this==null)throw new TypeError('"this" is null or not defined');if(i=Object(this),u=i.length>>>0,typeof n!="function")throw new TypeError("predicate must be a function");for(f=arguments[1],t=0;t<u;){if(r=i[t],n.call(f,r,t,i))return r;t++}return undefined}});String.prototype.startsWith||(String.prototype.startsWith=function(n,t){return this.substr(t||0,n.length)===n}),function(){function t(n){this.message=n}var n=typeof exports!="undefined"?exports:typeof self!="undefined"?self:$.global,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";t.prototype=new Error;t.prototype.name="InvalidCharacterError";n.btoa||(n.btoa=function(n){for(var e=String(n),u,f,r=0,o=i,s="";e.charAt(r|0)||(o="=",r%1);s+=o.charAt(63&u>>8-r%1*8)){if(f=e.charCodeAt(r+=3/4),f>255)throw new t("'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.");u=u<<8|f}return s});n.atob||(n.atob=function(n){var e=String(n).replace(/[=]+$/,"");if(e.length%4==1)throw new t("'atob' failed: The string to be decoded is not correctly encoded.");for(var u=0,f,r,s=0,o="";r=e.charAt(s++);~r&&(f=u%4?f*64+r:r,u++%4)?o+=String.fromCharCode(255&f>>(-2*u&6)):0)r=i.indexOf(r);return o})}()